{"version":3,"sources":["webpack:///./src/base/slider/Slider.vue?9d0d","webpack:///./src/api/recommend.js","webpack:///./src/views/recommend/Recommend.vue?d444","webpack:///./src/views/recommend/Recommend.vue?d6a7","webpack:///./src/base/slider/Slider.vue?7b58","webpack:///src/base/slider/Slider.vue","webpack:///./src/base/slider/Slider.vue?089b","webpack:///./src/base/slider/Slider.vue","webpack:///src/views/recommend/Recommend.vue","webpack:///./src/views/recommend/Recommend.vue?1210","webpack:///./src/views/recommend/Recommend.vue"],"names":["request","Request","getTopBanner","URL","params","pageSize","nid","pageNo","type","headers","Host","Referer","accessProxy","url","then","res","getRecommendList","picmid","rnd","Math","random","g_tk_new_20200303","categoryId","sortId","sin","ein","Object","assign","commonParams","commonHeaders","getSongList","disstid","jsonpCommonParams","json","utf8","onlysong","platform","hostUin","needNewCode","referer","host","render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","sliderData","_l","item","index","key","attrs","linkUrl","on","$event","initBScroll","_e","_v","recommendListData","selectDisc","directives","name","rawName","value","expression","_s","dissname","creator","length","staticRenderFns","_t","dots","class","currentIndex","data","props","loop","Boolean","default","autoPlay","interval","Number","mounted","$nextTick","window","addEventListener","methods","_setSliderWidth","elSliderItemList","elSliderGroup","children","child","style","width","sliderWidth","sliderGroupWidth","isOnResize","_initSlider","slider","scrollX","scrollY","momentum","click","snap","threshold","speed","clearTimeout","_initDots","Array","_play","timer","setInterval","nextIndex","beforeDestroy","component","mixins","components","Slider","Scroll","Loading","_getTopBanner","_getRecommendList","whenPlayList","$refs","scroll","$el","bottom","refresh","$router","push","path","setDisk","disk"],"mappings":"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","file":"js/chunk-0e0afd53.f407fa76.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Slider.vue?vue&type=style&index=0&id=461ebf44&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Slider.vue?vue&type=style&index=0&id=461ebf44&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"","import Request from '../common/util/request'\r\nimport { commonParams, commonHeaders, jsonpCommonParams } from './config'\r\n\r\nconst request = new Request()\r\n\r\n// 轮播图api\r\nexport function getTopBanner() {\r\n  const URL = '/api/getTopBanner'\r\n  // 约定的后台访问第三方接口时需要传入的参数(原网站访问该接口时使用的参数)\r\n  const params = {\r\n    pageSize: 10,\r\n    nid: 23831003,\r\n    pageNo: 0,\r\n    type: 2006\r\n  }\r\n  // 约定的后台访问第三方接口时需要传入的请求头(原网站访问该接口时使用的请求头)\r\n  const headers = {\r\n    Host: 'm.music.migu.cn',\r\n    Referer: 'https://m.music.migu.cn/v3'\r\n  }\r\n  return request.accessProxy({\r\n    url: URL,\r\n    params,\r\n    headers\r\n  })\r\n    .then(res => {\r\n      return res\r\n    })\r\n}\r\n// 歌单api\r\nexport function getRecommendList() {\r\n  const URL = '/api/getRecommendList'\r\n  const params = {\r\n    picmid: 1,\r\n    rnd: Math.random(),\r\n    g_tk_new_20200303: 1248420552,\r\n    categoryId: 10000000,\r\n    sortId: 5,\r\n    sin: 0,\r\n    ein: 19\r\n  }\r\n  Object.assign(params, commonParams)\r\n  const headers = commonHeaders\r\n  return request.accessProxy({\r\n    url: URL,\r\n    params,\r\n    headers\r\n  })\r\n    .then(res => {\r\n      return res\r\n    })\r\n}\r\n// 歌单详情api\r\nexport function getSongList(disstid) {\r\n  const URL = '/api/getCdInfo'\r\n  const params = Object.assign({}, jsonpCommonParams, {\r\n    disstid,\r\n    type: 1,\r\n    json: 1,\r\n    utf8: 1,\r\n    onlysong: 0,\r\n    platform: 'yqq',\r\n    hostUin: 0,\r\n    needNewCode: 0\r\n  })\r\n  const headers = {\r\n    referer: 'https://c.y.qq.com/',\r\n    host: 'c.y.qq.com'\r\n  }\r\n  request.accessProxy({\r\n    url: URL,\r\n    headers,\r\n    params\r\n  })\r\n  return request.accessProxy({\r\n    url: URL,\r\n    headers,\r\n    params\r\n  }).then(res => {\r\n    return res\r\n  })\r\n}\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Recommend.vue?vue&type=style&index=0&id=f9766940&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Recommend.vue?vue&type=style&index=0&id=f9766940&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recommend\"},[_c('scroll',{ref:\"scroll\",staticClass:\"recommend-content\"},[_c('div',[(_vm.sliderData.length)?_c('div',{staticClass:\"slider-wrapper\"},[_c('slider',_vm._l((_vm.sliderData),function(item,index){return _c('div',{key:index},[_c('a',{attrs:{\"href\":item.linkUrl}},[_c('img',{attrs:{\"src\":item.url},on:{\"load\":function($event){!index && _vm.initBScroll()}}})])])}),0)],1):_vm._e(),_c('div',{staticClass:\"recommend-list-wrapper\"},[_c('h1',{staticClass:\"list-title\"},[_vm._v(\"热门歌单推荐\")]),(_vm.recommendListData[0])?_c('ul',{staticClass:\"recommend-list\"},_vm._l((_vm.recommendListData),function(item,index){return _c('li',{key:index,staticClass:\"recommend-item\",on:{\"click\":function($event){return _vm.selectDisc(item)}}},[_c('div',{staticClass:\"img-wrapper\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.imgurl),expression:\"item.imgurl\"}],on:{\"load\":function($event){!index && _vm.initBScroll()}}})]),_c('div',{staticClass:\"text-wrapper\"},[_c('h2',{staticClass:\"title\"},[_vm._v(_vm._s(item.dissname))]),_c('span',{staticClass:\"info\"},[_vm._v(_vm._s(item.creator.name))])])])}),0):_vm._e()])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.sliderData.length || !_vm.recommendListData.length),expression:\"!sliderData.length || !recommendListData.length\"}],staticClass:\"loading-wrapper\"},[_c('loading')],1),_c('transition',{attrs:{\"name\":\"slide\"}},[_c('router-view')],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"slider\",staticClass:\"slider\"},[_c('div',{ref:\"sliderGroup\",staticClass:\"slider-group\"},[_vm._t(\"default\")],2),(_vm.dots.length)?_c('div',{staticClass:\"dots-wrapper\"},_vm._l((_vm.dots),function(item,index){return _c('span',{key:index,staticClass:\"dot\",class:index === _vm.currentIndex ? 'active' : ''})}),0):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"slider\" ref=\"slider\">\r\n    <div class=\"slider-group\" ref=\"sliderGroup\">\r\n      <slot></slot>\r\n    </div>\r\n    <div class=\"dots-wrapper\" v-if=\"dots.length\">\r\n      <span\r\n        class=\"dot\"\r\n        v-for=\"(item, index) in dots\"\r\n        :key=\"index\"\r\n        :class=\"index === currentIndex ? 'active' : ''\"\r\n      ></span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Util from '../../common/util'\r\nimport BScroll from 'better-scroll'\r\n\r\nconst util = new Util()\r\nexport default {\r\n  data() {\r\n    return {\r\n      currentIndex: 0,\r\n      dots: []\r\n    }\r\n  },\r\n  props: {\r\n    loop: { // 是否循环轮播\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    autoPlay: { // 是否自动轮播\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    interval: { // 轮播间隔\r\n      type: Number,\r\n      default: 3000\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this._setSliderWidth()\r\n      this._initSlider()\r\n      this._initDots()\r\n      if (this.autoPlay) {\r\n        this._play()\r\n      }\r\n      window.addEventListener('resize', () => {\r\n        if (this.slider) {\r\n          this._setSliderWidth(true)\r\n          this.slider.refresh()\r\n        }\r\n      })\r\n    })\r\n  },\r\n  methods: {\r\n    // 设置轮播图的宽度\r\n    _setSliderWidth(isOnResize) {\r\n      const elSliderGroup = this.$refs.sliderGroup\r\n      this.elSliderItemList = elSliderGroup.children\r\n      const elSliderItemList = this.elSliderItemList\r\n      const sliderWidth = this.$refs.slider.clientWidth\r\n      let sliderGroupWidth = 0\r\n      // 为sliderGroup节点中的每个div添加一个类名：slider-item\r\n      // 让.slider-item元素的宽度等于.slider的宽度\r\n      for (let i = 0; i < elSliderItemList.length; i++) {\r\n        const child = elSliderItemList[i]\r\n        util.addClass(child, 'slider-item')\r\n        child.style.width = sliderWidth + 'px'\r\n        sliderGroupWidth += sliderWidth\r\n      }\r\n      // BScroll内部实现循环轮播时，会克隆两个slider-item\r\n      // 更改窗口大小时（isOnResize 为 true），轮播图已经被初始化，也就是slider-item已经被克隆，因而不能重复克隆\r\n      if (this.loop && !isOnResize) {\r\n        sliderGroupWidth += 2 * sliderWidth\r\n      }\r\n      elSliderGroup.style.width = sliderGroupWidth + 'px'\r\n    },\r\n    // 初始化轮播图\r\n    _initSlider() {\r\n      this.slider = new BScroll(this.$refs.slider, {\r\n        scrollX: true,\r\n        scrollY: false,\r\n        momentum: false,\r\n        click: true,\r\n        snap: {\r\n          loop: this.loop,\r\n          threshold: 0.3,\r\n          speed: 400\r\n        }\r\n      })\r\n      this.slider.on('scrollEnd', () => {\r\n        // 获取轮播图当前所在位置\r\n        const pageIndex = this.slider.getCurrentPage().pageX\r\n        this.currentIndex = pageIndex\r\n        // 手拖动轮播图时，暂停自动轮播\r\n        if (this.autoPlay) {\r\n          clearTimeout(this.timer)\r\n          this._play()\r\n        }\r\n      })\r\n    },\r\n    // 设置dot的个数\r\n    _initDots() {\r\n      // BScroll内部克隆了两张图片，需要减2\r\n      this.dots = new Array(this.elSliderItemList.length - 2)\r\n    },\r\n    // 自动轮播\r\n    _play() {\r\n      let nextIndex\r\n      this.timer = setInterval(() => {\r\n        nextIndex = this.currentIndex + 1\r\n        nextIndex = nextIndex === 7 ? 0 : nextIndex\r\n        this.slider.goToPage(nextIndex, 0, 400)\r\n      }, this.interval)\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    clearTimeout(this.timer)\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\"  rel=\"stylesheet/stylus\" scoped>\r\n@import '../../common/stylus/variable';\r\n  .slider\r\n    min-height 1px\r\n    overflow hidden\r\n    .slider-group\r\n      overflow hidden\r\n      .slider-item\r\n        float: left\r\n        a\r\n          display: block\r\n          width: 100%\r\n          img\r\n            display block\r\n            width 100%\r\n    .dots-wrapper\r\n      position absolute\r\n      height 8px\r\n      bottom 12px\r\n      width 100%\r\n      text-align center\r\n      .dot\r\n        display inline-block\r\n        width 8px\r\n        height 8px\r\n        border-radius 50%\r\n        background-color $color-text-ll\r\n        margin 0 4px\r\n        &.active\r\n          width: 20px\r\n          border-radius: 5px\r\n          background: $color-text-ll\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Slider.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Slider.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Slider.vue?vue&type=template&id=461ebf44&scoped=true&\"\nimport script from \"./Slider.vue?vue&type=script&lang=js&\"\nexport * from \"./Slider.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Slider.vue?vue&type=style&index=0&id=461ebf44&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"461ebf44\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"recommend\">\r\n    <scroll class=\"recommend-content\" ref=\"scroll\">\r\n      <div>\r\n        <!-- 轮播图 -->\r\n        <div class=\"slider-wrapper\" v-if=\"sliderData.length\">\r\n          <slider>\r\n            <div v-for=\"(item, index) in sliderData\" :key=\"index\">\r\n              <a :href=\"item.linkUrl\"><img @load=\"!index && initBScroll()\" :src=\"item.url\"></a>\r\n            </div>\r\n          </slider>\r\n        </div>\r\n        <!-- 推荐歌单列表 -->\r\n        <div class=\"recommend-list-wrapper\">\r\n          <h1 class=\"list-title\">热门歌单推荐</h1>\r\n          <ul class=\"recommend-list\" v-if=\"recommendListData[0]\">\r\n            <li class=\"recommend-item\"\r\n                v-for=\"(item, index) in recommendListData\"\r\n                :key=\"index\"\r\n                @click=\"selectDisc(item)\"\r\n            >\r\n              <div class=\"img-wrapper\">\r\n                <img @load=\"!index && initBScroll()\" v-lazy=\"item.imgurl\">\r\n              </div>\r\n              <div class=\"text-wrapper\">\r\n                <h2 class=\"title\">{{ item.dissname }}</h2>\r\n                <span class=\"info\">{{ item.creator.name }}</span>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class=\"loading-wrapper\"\r\n           v-show=\"!sliderData.length || !recommendListData.length\">\r\n        <loading />\r\n      </div>\r\n      <transition name=\"slide\">\r\n        <router-view />\r\n      </transition>\r\n    </scroll>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Slider from '../../base/slider/Slider'\r\nimport Scroll from '../../base/scroll/Scroll'\r\nimport Loading from '../../base/loading/Loading'\r\nimport { getTopBanner, getRecommendList } from '../../api/recommend'\r\nimport { ERR_OK } from '../../api/config'\r\nimport { playListMixin } from '../../common/util/mixin'\r\nimport { mapMutations } from 'vuex'\r\n\r\nexport default {\r\n  mixins: [playListMixin],\r\n  data() {\r\n    return {\r\n      sliderData: [],\r\n      recommendListData: []\r\n    }\r\n  },\r\n  components: {\r\n    Slider,\r\n    Scroll,\r\n    Loading\r\n  },\r\n  mounted() {\r\n    this._getTopBanner()\r\n    this._getRecommendList()\r\n  },\r\n  methods: {\r\n    whenPlayList(playList) {\r\n      const bottom = playList.length ? '60px' : ''\r\n      this.$refs.scroll.$el.style.bottom = bottom\r\n      this.$refs.scroll.refresh()\r\n    },\r\n    selectDisc(disk) {\r\n      this.$router.push({\r\n        path: `/recommend/${disk.dissid}`\r\n      })\r\n      this.setDisk(disk)\r\n    },\r\n    // 获取轮播图相关数据\r\n    _getTopBanner() {\r\n      getTopBanner()\r\n        .then(res => {\r\n          if (res.code === ERR_OK) {\r\n            this.sliderData = res.results\r\n          }\r\n        })\r\n    },\r\n    // 获取歌单列表相关数据\r\n    _getRecommendList() {\r\n      getRecommendList()\r\n        .then(res => {\r\n          if (res.code === ERR_OK) {\r\n            this.recommendListData = res.data.list\r\n          }\r\n        })\r\n    },\r\n    // 事件：初始化better-scroll\r\n    initBScroll() {\r\n      this.$refs.scroll.refresh()\r\n    },\r\n    ...mapMutations(['setDisk'])\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" rel=\"stylesheet/stylus\" scoped>\r\n@import '../../common/stylus/mixin';\r\n@import '../../common/stylus/variable';\r\n.recommend\r\n  .recommend-content\r\n    position fixed\r\n    width 100%\r\n    top 88px\r\n    bottom 0\r\n    overflow: hidden\r\n    .slider-wrapper\r\n      position relative\r\n      width 100%\r\n      overflow hidden\r\n    .recommend-list-wrapper\r\n      .list-title\r\n        height 65px\r\n        flex-center()\r\n        font-size 16px\r\n        font-weight bold\r\n        color #2c3e50\r\n      .recommend-list\r\n        .recommend-item\r\n          display flex\r\n          height 63px\r\n          margin 0 20px 20px 20px\r\n          border-radius 10px\r\n          // border 1px solid #ccc\r\n          // box-shadow 1px 1px 5px #eee\r\n          .img-wrapper\r\n            padding-right 20px\r\n            img\r\n              height 60px\r\n              border-radius 10px\r\n          .text-wrapper\r\n            display flex\r\n            flex-direction column\r\n            justify-content space-around\r\n            font-size 15px\r\n            flex 1\r\n            height 100%\r\n            .title\r\n              display -webkit-box\r\n              -webkit-box-orient vertical\r\n              -webkit-line-clamp 1\r\n              overflow hidden\r\n            .info\r\n              color #999999\r\n              font-size 13px\r\n  .loading-wrapper\r\n    position absolute\r\n    top 0\r\n    height 100%\r\n    width 100%\r\n    flex-center()\r\n\r\n.slide-enter-active, .slide-leave-active {\r\n  transition transform .3s linear\r\n}\r\n.slide-enter, .slide-leave-to {\r\n  transform translate(100%, 0)\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Recommend.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Recommend.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Recommend.vue?vue&type=template&id=f9766940&scoped=true&\"\nimport script from \"./Recommend.vue?vue&type=script&lang=js&\"\nexport * from \"./Recommend.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Recommend.vue?vue&type=style&index=0&id=f9766940&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f9766940\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}