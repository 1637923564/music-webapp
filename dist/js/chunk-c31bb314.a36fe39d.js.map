{"version":3,"sources":["webpack:///./src/components/music-list/MusicList.vue?6a2b","webpack:///./src/views/disc-detail/DiskDetail.vue?fece","webpack:///./src/api/recommend.js","webpack:///./src/components/music-list/MusicList.vue?2acb","webpack:///src/components/music-list/MusicList.vue","webpack:///./src/components/music-list/MusicList.vue?8932","webpack:///./src/components/music-list/MusicList.vue","webpack:///./src/views/disc-detail/DiskDetail.vue?c530","webpack:///src/views/disc-detail/DiskDetail.vue","webpack:///./src/views/disc-detail/DiskDetail.vue?d042","webpack:///./src/views/disc-detail/DiskDetail.vue"],"names":["request","Request","getTopBanner","URL","params","pageSize","nid","pageNo","type","headers","Host","Referer","accessProxy","url","then","res","getRecommendList","picmid","rnd","Math","random","g_tk_new_20200303","categoryId","sortId","sin","ein","Object","assign","commonParams","commonHeaders","getSongList","disstid","jsonpCommonParams","json","utf8","onlysong","platform","hostUin","needNewCode","referer","host","render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","on","back","_v","_s","title","style","directives","name","rawName","value","songs","expression","playAll","attrs","scroll","rank","selectSong","staticRenderFns","mixins","props","bgImg","String","default","Array","Boolean","data","scrollY","components","SongList","Scroll","computed","bgStyle","mounted","_setStyle","minTranslate","imageHeight","$refs","clientHeight","methods","whenPlayList","$el","bottom","refresh","selectPlay","coor","y","$router","go","selectPlayAll","bg","top","bgLayer","watch","currentY","scale","percent","transform","blur","min","filter","opacity","mask","background","color","component","disk","dissname","imgurl","MusicList","created","_getDiskList","dissid","push","_normalizeSongs","list","forEach","ret"],"mappings":"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","file":"js/chunk-c31bb314.a36fe39d.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MusicList.vue?vue&type=style&index=0&id=3da0f1a2&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MusicList.vue?vue&type=style&index=0&id=3da0f1a2&lang=stylus&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiskDetail.vue?vue&type=style&index=0&id=e3757306&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiskDetail.vue?vue&type=style&index=0&id=e3757306&lang=stylus&scoped=true&\"","import Request from '../common/util/request'\r\nimport { commonParams, commonHeaders, jsonpCommonParams } from './config'\r\n\r\nconst request = new Request()\r\n\r\n// 轮播图api\r\nexport function getTopBanner() {\r\n  const URL = '/api/getTopBanner'\r\n  // 约定的后台访问第三方接口时需要传入的参数(原网站访问该接口时使用的参数)\r\n  const params = {\r\n    pageSize: 10,\r\n    nid: 23831003,\r\n    pageNo: 0,\r\n    type: 2006\r\n  }\r\n  // 约定的后台访问第三方接口时需要传入的请求头(原网站访问该接口时使用的请求头)\r\n  const headers = {\r\n    Host: 'm.music.migu.cn',\r\n    Referer: 'https://m.music.migu.cn/v3'\r\n  }\r\n  return request.accessProxy({\r\n    url: URL,\r\n    params,\r\n    headers\r\n  })\r\n    .then(res => {\r\n      return res\r\n    })\r\n}\r\n// 歌单api\r\nexport function getRecommendList() {\r\n  const URL = '/api/getRecommendList'\r\n  const params = {\r\n    picmid: 1,\r\n    rnd: Math.random(),\r\n    g_tk_new_20200303: 1248420552,\r\n    categoryId: 10000000,\r\n    sortId: 5,\r\n    sin: 0,\r\n    ein: 19\r\n  }\r\n  Object.assign(params, commonParams)\r\n  const headers = commonHeaders\r\n  return request.accessProxy({\r\n    url: URL,\r\n    params,\r\n    headers\r\n  })\r\n    .then(res => {\r\n      return res\r\n    })\r\n}\r\n// 歌单详情api\r\nexport function getSongList(disstid) {\r\n  const URL = '/api/getCdInfo'\r\n  const params = Object.assign({}, jsonpCommonParams, {\r\n    disstid,\r\n    type: 1,\r\n    json: 1,\r\n    utf8: 1,\r\n    onlysong: 0,\r\n    platform: 'yqq',\r\n    hostUin: 0,\r\n    needNewCode: 0\r\n  })\r\n  const headers = {\r\n    referer: 'https://c.y.qq.com/',\r\n    host: 'c.y.qq.com'\r\n  }\r\n  request.accessProxy({\r\n    url: URL,\r\n    headers,\r\n    params\r\n  })\r\n  return request.accessProxy({\r\n    url: URL,\r\n    headers,\r\n    params\r\n  }).then(res => {\r\n    return res\r\n  })\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-list\"},[_c('div',{ref:\"title\",staticClass:\"title-wrapper\"},[_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"icon-back\"})]),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))])]),_c('div',{ref:\"bg\",staticClass:\"background\",style:(_vm.bgStyle)},[_c('div',{ref:\"mask\",staticClass:\"mask\"}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.songs.length),expression:\"songs.length\"}],staticClass:\"play-wrapper\"},[_c('div',{staticClass:\"play-btn\",on:{\"click\":_vm.playAll}},[_c('i',{staticClass:\"icon-play\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"随机播放全部\")])])])]),_c('div',{ref:\"bgLayer\",staticClass:\"bg-layer\"}),_c('scroll',{ref:\"scroll\",staticClass:\"song-scroll\",attrs:{\"probeType\":3,\"listenScroll\":true,\"tag\":_vm.songs},on:{\"scroll\":_vm.scroll}},[_c('song-list',{attrs:{\"songs\":_vm.songs,\"rank\":_vm.rank},on:{\"selectSong\":_vm.selectSong}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"music-list\">\r\n    <div class=\"title-wrapper\" ref=\"title\">\r\n      <div class=\"back\" @click=\"back\"><i class=\"icon-back\"></i></div>\r\n      <div class=\"title\">{{ title }}</div>\r\n    </div>\r\n    <div class=\"background\" :style=\"bgStyle\" ref=\"bg\">\r\n      <div class=\"mask\" ref=\"mask\"></div>\r\n      <div class=\"play-wrapper\" v-show=\"songs.length\">\r\n        <div class=\"play-btn\" @click=\"playAll\">\r\n          <i class=\"icon-play\"></i>\r\n          <span class=\"text\">随机播放全部</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"bg-layer\" ref=\"bgLayer\"></div>\r\n    <scroll @scroll=\"scroll\"\r\n            :probeType=\"3\"\r\n            :listenScroll=\"true\"\r\n            class=\"song-scroll\"\r\n            ref=\"scroll\"\r\n            :tag=\"songs\">\r\n      <song-list @selectSong=\"selectSong\" :songs=\"songs\" :rank=\"rank\" />\r\n    </scroll>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SongList from '../../base/song-list/SongList'\r\nimport Scroll from '../../base/scroll/Scroll'\r\nimport Util from '../../common/util'\r\nimport { playListMixin } from '../../common/util/mixin'\r\n\r\nimport { mapActions } from 'vuex'\r\n\r\nconst util = new Util()\r\n\r\nconst transform = util.prefixStyle('transform')\r\nconst filter = util.prefixStyle('filter')\r\n\r\nexport default {\r\n  mixins: [playListMixin],\r\n  props: {\r\n    bgImg: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    songs: {\r\n      type: Array,\r\n      default: () => {\r\n        return []\r\n      }\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    rank: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      scrollY: 0\r\n    }\r\n  },\r\n  components: {\r\n    SongList,\r\n    Scroll\r\n  },\r\n  computed: {\r\n    bgStyle() {\r\n      return `background-image: url(${this.bgImg})`\r\n    }\r\n  },\r\n  mounted() {\r\n    this._setStyle()\r\n    this.minTranslate = -this.imageHeight + this.$refs.title.clientHeight\r\n  },\r\n  methods: {\r\n    whenPlayList(playList) {\r\n      const bottom = playList.length ? '60px' : ''\r\n      this.$refs.scroll.$el.style.bottom = bottom\r\n      this.$refs.scroll.refresh()\r\n    },\r\n    selectSong(song, index) {\r\n      this.selectPlay({ list: this.songs, index })\r\n    },\r\n    scroll(coor) {\r\n      this.scrollY = coor.y\r\n    },\r\n    back() {\r\n      this.$router.go(-1)\r\n    },\r\n    playAll() {\r\n      this.selectPlayAll({ list: this.songs })\r\n    },\r\n    _setStyle() {\r\n      this.imageHeight = this.$refs.bg.clientHeight\r\n      this.$refs.scroll.$el.style.top = `${this.imageHeight}px`\r\n      this.$refs.bgLayer.style.top = `${this.imageHeight}px`\r\n    },\r\n    ...mapActions(['selectPlay', 'selectPlayAll'])\r\n  },\r\n  watch: {\r\n    // 拖动列表时，各个元素的样式变化\r\n    scrollY(currentY) {\r\n      let scale = 1\r\n      let blur = 0\r\n      const opacity = currentY / this.minTranslate\r\n      const percent = Math.abs(currentY / this.imageHeight)\r\n\r\n      // currentY > 0 : 向下拖动时\r\n      if (currentY > 0) {\r\n        scale += percent\r\n        this.$refs.bg.style[transform] = `scale(${scale})`\r\n      } else {\r\n        blur = Math.min(25 * percent, 25)\r\n        this.$refs.bg.style[filter] = `blur(${blur}px)`\r\n      }\r\n\r\n      // 0 < opacity <= 1 : 向上拉动，scroll(被拖动的盒子)滚动到顶部之前\r\n      if (opacity >= 0.4 && opacity <= 1) {\r\n        const maskC = Math.ceil(Math.pow(opacity, 2) * 250)\r\n        const titleC = Math.floor(Math.pow((1 - opacity + 0.4), 2) * 250)\r\n        this.$refs.mask.style.background = `rgba(${maskC}, ${maskC}, ${maskC}, ${opacity})`\r\n        this.$refs.title.style.color = `rgb(${titleC}, ${titleC}, ${titleC})`\r\n      }\r\n      // currentY < this.minTranslate : 向上拖动，scroll已经超出了顶部\r\n      if (currentY < this.minTranslate) {\r\n        this.$refs.title.style.background = `rgba(250, 250, 250, ${opacity})`\r\n        this.$refs.title.style.color = 'rgb(0, 0, 0)'\r\n      } else {\r\n        this.$refs.title.style.background = null\r\n      }\r\n      if (currentY >= 0) {\r\n        this.$refs.mask.style.background = 'rgba(41, 41, 41, .3)'\r\n        this.$refs.bg.style[filter] = 'blur(0)'\r\n        this.$refs.title.style.color = 'rgb(250, 250, 250)'\r\n      }\r\n      const translate = Math.max(currentY, this.minTranslate)\r\n      this.$refs.bgLayer.style[transform] = `translateY(${translate}px)`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import \"../../common/stylus/variable\"\r\n@import \"../../common/stylus/mixin\"\r\n\r\n.music-list {\r\n  background rgba(250,250,250,1)\r\n  .title-wrapper {\r\n    position absolute\r\n    height 40px\r\n    width 100%\r\n    display flex\r\n    font-size $font-size-large\r\n    z-index 30\r\n    color #fff\r\n    .back {\r\n      flex 0 0 45px\r\n      flex-center()\r\n      font-size 22px\r\n    }\r\n    .title {\r\n      flex 1\r\n      display -webkit-box\r\n      -webkit-box-orient vertical\r\n      -webkit-line-clamp 1\r\n      overflow hidden\r\n      line-height 40px\r\n      text-align center\r\n      font-weight bold\r\n    }\r\n    &:after {\r\n      content ''\r\n      flex 0 0 45px\r\n    }\r\n  }\r\n  .background {\r\n    position relative\r\n    background-size cover\r\n    padding-top 70%\r\n    transform-origin: top\r\n    height 0\r\n    .mask {\r\n      position absolute\r\n      width 100%\r\n      top 0\r\n      bottom 0\r\n      background rgba(41, 41, 41, 0.3)\r\n    }\r\n    .play-wrapper {\r\n      position absolute\r\n      bottom 20px\r\n      flex-center()\r\n      color #22d59c\r\n      width 100%\r\n      .play-btn {\r\n        width 135px\r\n        height 32px\r\n        border 2px solid #22d59c\r\n        border-radius 32px\r\n        flex-center()\r\n        .icon-play {\r\n          font-size $font-size-medium-x\r\n        }\r\n        .text {\r\n          margin-left 5px\r\n          font-size $font-size-small\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .bg-layer {\r\n    position absolute\r\n    background rgba(250,250,250, 1)\r\n    width 100%\r\n    height 100%\r\n  }\r\n  .song-scroll {\r\n    position absolute\r\n    width 100%\r\n    bottom 0\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MusicList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MusicList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MusicList.vue?vue&type=template&id=3da0f1a2&scoped=true&\"\nimport script from \"./MusicList.vue?vue&type=script&lang=js&\"\nexport * from \"./MusicList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MusicList.vue?vue&type=style&index=0&id=3da0f1a2&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3da0f1a2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"disk-detail\"},[_c('music-list',{attrs:{\"title\":_vm.disk.dissname,\"bgImg\":_vm.disk.imgurl,\"songs\":_vm.songs}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"disk-detail\">\r\n    <music-list :title=\"disk.dissname\" :bgImg=\"disk.imgurl\" :songs=\"songs\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\n\r\nimport MusicList from '../../components/music-list/MusicList'\r\nimport { getSongList } from '../../api/recommend.js'\r\nimport { createSong, isValidMusic, processUrl } from '../../common/util/song'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      songs: []\r\n    }\r\n  },\r\n  components: {\r\n    MusicList\r\n  },\r\n  computed: {\r\n    ...mapState(['disk'])\r\n  },\r\n  created() {\r\n    this._getDiskList()\r\n  },\r\n  methods: {\r\n    _getDiskList() {\r\n      if (!this.disk.dissid) {\r\n        this.$router.push('/recommend')\r\n        return\r\n      }\r\n      getSongList(this.disk.dissid)\r\n        .then(res => {\r\n          processUrl(this._normalizeSongs(res.cdlist[0].songlist))\r\n            .then((songs) => {\r\n              this.songs = songs\r\n            })\r\n        })\r\n    },\r\n    _normalizeSongs (list) {\r\n      const ret = []\r\n      list.forEach((musicData) => {\r\n        if (isValidMusic(musicData)) {\r\n          ret.push(createSong(musicData))\r\n        }\r\n      })\r\n      return ret\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.disk-detail {\r\n  position fixed\r\n  top 0\r\n  width 100%\r\n  height 100%\r\n  z-index 1000\r\n  background $color-background\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiskDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiskDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DiskDetail.vue?vue&type=template&id=e3757306&scoped=true&\"\nimport script from \"./DiskDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./DiskDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DiskDetail.vue?vue&type=style&index=0&id=e3757306&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e3757306\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}