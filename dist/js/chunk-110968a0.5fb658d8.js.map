{"version":3,"sources":["webpack:///./src/views/rank/Rank.vue?444f","webpack:///src/views/rank/Rank.vue","webpack:///./src/views/rank/Rank.vue?09c3","webpack:///./src/views/rank/Rank.vue","webpack:///./src/views/rank/Rank.vue?99fd","webpack:///./src/api/rank.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","topList","_l","top","index","key","on","$event","openRankDetail","directives","name","rawName","value","expression","_v","_s","topTitle","info","j","singername","songname","_e","staticRenderFns","mixins","data","components","Scroll","created","_getTopList","methods","$router","push","path","setRank","whenPlayList","playList","length","$refs","scroll","$el","style","bottom","refresh","res","code","component","request","Request","getTopList","url","Object","assign","jsonpCommonParams","uin","needNewCode","platform","jsonp","jsonpOptions","getMusicList","topid","tpl","page","type"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,SAAS,CAACG,IAAI,SAASD,YAAY,aAAaE,MAAM,CAAC,IAAMR,EAAIS,UAAU,CAACL,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAAEN,EAAIS,QAAc,OAAEL,EAAG,KAAK,CAACE,YAAY,QAAQN,EAAIU,GAAIV,EAAW,SAAE,SAASW,EAAIC,GAAO,OAAOR,EAAG,KAAK,CAACS,IAAID,EAAMN,YAAY,OAAOQ,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOf,EAAIgB,eAAeL,MAAQ,CAACP,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,MAAM,CAACa,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOT,EAAU,OAAEU,WAAW,mBAAmBjB,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,KAAK,CAACE,YAAY,SAAS,CAACN,EAAIsB,GAAGtB,EAAIuB,GAAGZ,EAAIa,aAAaxB,EAAIU,GAAIC,EAAY,UAAE,SAASc,EAAKC,GAAG,OAAOtB,EAAG,OAAO,CAACS,IAAIa,EAAEpB,YAAY,QAAQ,CAACN,EAAIsB,GAAG,IAAItB,EAAIuB,GAAGG,EAAI,GAAG,KAAK1B,EAAIuB,GAAGE,EAAKE,YAAY,MAAM3B,EAAIuB,GAAGE,EAAKG,UAAU,WAAU,QAAO,GAAG5B,EAAI6B,SAASzB,EAAG,aAAa,CAACI,MAAM,CAAC,KAAO,UAAU,CAACJ,EAAG,gBAAgB,IAAI,IACr6B0B,EAAkB,G,wECsCtB,GACEC,OAAQ,CAAC,EAAX,MACEC,KAFF,WAGI,MAAO,CACLvB,QAAS,KAGbwB,WAAY,CACVC,OAAJ,QAEEC,QAVF,WAWIlC,KAAKmC,eAEPC,QAAS,OAAX,OAAW,CAAX,CACIrB,eADJ,SACA,GACMf,KAAKqC,QAAQC,KAAK,CAChBC,KAAM,SAAd,eAEMvC,KAAKwC,QAAQ9B,IAGf+B,aARJ,SAQA,GACM,GAAIC,EAASC,OAAQ,CACnB,IAAR,SACQ3C,KAAK4C,MAAMC,OAAOC,IAAIC,MAAMC,OAASA,EACrChD,KAAK4C,MAAMC,OAAOI,YAGtBd,YAfJ,WAeA,WACM,OAAN,OAAM,GAAN,kBACYe,EAAIC,OAAS,EAAzB,OACU,EAAV,6BAIA,yCC1E6V,I,wBCQzVC,EAAY,eACd,EACAtD,EACA+B,GACA,EACA,KACA,WACA,MAIa,aAAAuB,E,6CCnBf,yBAA2jB,EAAG,G,oCCA9jB,gGAGMC,EAAU,IAAIC,OAEb,SAASC,IACd,IAAMC,EAAM,qDAENzB,EAAO0B,OAAOC,OAAO,GAAIC,OAAmB,CAChDC,IAAK,EACLC,YAAa,EACbC,SAAU,OAGZ,OAAOT,EAAQU,MAAMP,EAAKzB,EAAMiC,QAG3B,SAASC,EAAcC,GAC5B,IAAMV,EAAM,sDAENzB,EAAO0B,OAAOC,OAAO,GAAIC,OAAmB,CAChDO,QACAL,YAAa,EACbD,IAAK,EACLO,IAAK,EACLC,KAAM,SACNC,KAAM,MACNP,SAAU,OAGZ,OAAOT,EAAQU,MAAMP,EAAKzB,EAAMiC,U","file":"js/chunk-110968a0.5fb658d8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rank\"},[_c('scroll',{ref:\"scroll\",staticClass:\"scroll-box\",attrs:{\"tag\":_vm.topList}},[_c('div',{staticClass:\"rank-wrapper\"},[(_vm.topList.length)?_c('ul',{staticClass:\"list\"},_vm._l((_vm.topList),function(top,index){return _c('li',{key:index,staticClass:\"rank\",on:{\"click\":function($event){return _vm.openRankDetail(top)}}},[_c('div',{staticClass:\"image\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(top.picUrl),expression:\"top.picUrl\"}]})]),_c('div',{staticClass:\"detail\"},[_c('h1',{staticClass:\"title\"},[_vm._v(_vm._s(top.topTitle))]),_vm._l((top.songList),function(info,j){return _c('span',{key:j,staticClass:\"text\"},[_vm._v(\" \"+_vm._s(j + 1)+\". \"+_vm._s(info.singername)+\" - \"+_vm._s(info.songname)+\" \")])})],2)])}),0):_vm._e()])]),_c('transition',{attrs:{\"name\":\"slide\"}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"rank\">\r\n    <scroll class=\"scroll-box\" :tag=\"topList\" ref=\"scroll\">\r\n      <div class=\"rank-wrapper\">\r\n        <ul class=\"list\" v-if=\"topList.length\">\r\n          <li class=\"rank\"\r\n              v-for=\"(top, index) in topList\"\r\n              :key=\"index\"\r\n              @click=\"openRankDetail(top)\"\r\n          >\r\n            <!-- 图片 -->\r\n            <div class=\"image\"><img v-lazy=\"top.picUrl\"></div>\r\n            <!-- 内容 -->\r\n            <div class=\"detail\">\r\n              <h1 class=\"title\">{{ top.topTitle }}</h1>\r\n              <span class=\"text\" v-for=\"(info, j) in top.songList\" :key=\"j\">\r\n                {{ j + 1 }}. {{ info.singername }} - {{ info.songname }}\r\n              </span>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </scroll>\r\n    <transition name=\"slide\">\r\n      <router-view></router-view>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import { mapState } from 'vuex'\r\n\r\nimport { getTopList } from '../../api/rank'\r\nimport { ERR_OK } from '../../api/config'\r\nimport { playListMixin } from '../../common/util/mixin'\r\n\r\nimport Scroll from '../../base/scroll/Scroll'\r\nimport { mapMutations } from 'vuex'\r\n\r\nexport default {\r\n  mixins: [playListMixin],\r\n  data() {\r\n    return {\r\n      topList: []\r\n    }\r\n  },\r\n  components: {\r\n    Scroll\r\n  },\r\n  created() {\r\n    this._getTopList()\r\n  },\r\n  methods: {\r\n    openRankDetail(top) {\r\n      this.$router.push({\r\n        path: `/rank/${top.id}`\r\n      })\r\n      this.setRank(top)\r\n    },\r\n    // 打开mini播放器的时候，该界面的bottom为60px\r\n    whenPlayList(playList) {\r\n      if (playList.length) {\r\n        const bottom = 60 + 'px'\r\n        this.$refs.scroll.$el.style.bottom = bottom\r\n        this.$refs.scroll.refresh()\r\n      }\r\n    },\r\n    _getTopList() {\r\n      getTopList().then(res => {\r\n        if (res.code === ERR_OK) {\r\n          this.topList = res.data.topList\r\n        }\r\n      })\r\n    },\r\n    ...mapMutations(['setRank'])\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '../../common/stylus/variable';\r\n.scroll-box {\r\n  width 100%\r\n  position fixed\r\n  top 88px\r\n  bottom 0\r\n  overflow hidden\r\n  .rank-wrapper {\r\n    .list {\r\n      padding-top 12px\r\n      .rank {\r\n        margin 20px 20px 0 20px\r\n        height 100px\r\n        display flex\r\n        background #fff\r\n        border-radius 10px\r\n        .image {\r\n          flex 0 0 100px\r\n          img {\r\n            width 100px\r\n            height 100px\r\n            border-radius 10px 0 0 10px\r\n          }\r\n        }\r\n        .detail {\r\n          flex 1\r\n          height 100%\r\n          display flex\r\n          flex-direction column\r\n          justify-content center\r\n          .title {\r\n            padding 0 20px\r\n            font-weight bold\r\n            color #000\r\n            padding-bottom 10px\r\n          }\r\n          .text {\r\n            display -webkit-box\r\n            -webkit-box-orient vertical\r\n            -webkit-line-clamp 1\r\n            overflow hidden\r\n            height 20px\r\n            padding 0 20px\r\n            font-size 14px\r\n            line-height 20px\r\n            color #2c3e50\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n.slide-enter-active, .slide-leave-active {\r\n  transition all .3s\r\n}\r\n.slide-enter, .slide-leave-to {\r\n  transform translate(100%, 0)\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Rank.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Rank.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Rank.vue?vue&type=template&id=d1975206&scoped=true&\"\nimport script from \"./Rank.vue?vue&type=script&lang=js&\"\nexport * from \"./Rank.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Rank.vue?vue&type=style&index=0&id=d1975206&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d1975206\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Rank.vue?vue&type=style&index=0&id=d1975206&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Rank.vue?vue&type=style&index=0&id=d1975206&lang=stylus&scoped=true&\"","import { jsonpCommonParams, jsonpOptions } from './config'\r\nimport Request from '../common/util/request'\r\n\r\nconst request = new Request()\r\n\r\nexport function getTopList () {\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_myqq_toplist.fcg'\r\n\r\n  const data = Object.assign({}, jsonpCommonParams, {\r\n    uin: 0,\r\n    needNewCode: 1,\r\n    platform: 'h5'\r\n  })\r\n\r\n  return request.jsonp(url, data, jsonpOptions)\r\n}\r\n\r\nexport function getMusicList (topid) {\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg'\r\n\r\n  const data = Object.assign({}, jsonpCommonParams, {\r\n    topid,\r\n    needNewCode: 1,\r\n    uin: 0,\r\n    tpl: 3,\r\n    page: 'detail',\r\n    type: 'top',\r\n    platform: 'h5'\r\n  })\r\n\r\n  return request.jsonp(url, data, jsonpOptions)\r\n}\r\n"],"sourceRoot":""}