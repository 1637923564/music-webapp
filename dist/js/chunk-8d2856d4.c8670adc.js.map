{"version":3,"sources":["webpack:///./src/components/music-list/MusicList.vue?6a2b","webpack:///./src/api/rank.js","webpack:///./src/components/music-list/MusicList.vue?5db2","webpack:///src/components/music-list/MusicList.vue","webpack:///./src/components/music-list/MusicList.vue?8932","webpack:///./src/components/music-list/MusicList.vue","webpack:///./src/views/rank-detail/RankDetail.vue?b8e0","webpack:///./src/views/rank-detail/RankDetail.vue?bdaa","webpack:///src/views/rank-detail/RankDetail.vue","webpack:///./src/views/rank-detail/RankDetail.vue?38eb","webpack:///./src/views/rank-detail/RankDetail.vue"],"names":["request","Request","getTopList","url","data","Object","assign","jsonpCommonParams","uin","needNewCode","platform","jsonp","jsonpOptions","getMusicList","topid","tpl","page","type","render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","on","back","_v","_s","title","style","directives","name","rawName","value","songs","expression","playAll","attrs","scroll","rank","selectSong","staticRenderFns","mixins","props","bgImg","String","default","Array","Boolean","scrollY","components","SongList","Scroll","computed","bgStyle","mounted","_setStyle","minTranslate","imageHeight","$refs","clientHeight","methods","whenPlayList","$el","bottom","refresh","selectPlay","coor","y","$router","go","selectPlayAll","bg","top","bgLayer","watch","currentY","scale","percent","transform","blur","Math","min","filter","opacity","mask","background","color","component","topTitle","picUrl","MusicList","created","_getMusicList","id","push","_normalizeSongs","list","forEach","ret"],"mappings":"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","file":"js/chunk-8d2856d4.c8670adc.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MusicList.vue?vue&type=style&index=0&id=3da0f1a2&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MusicList.vue?vue&type=style&index=0&id=3da0f1a2&lang=stylus&scoped=true&\"","import { jsonpCommonParams, jsonpOptions } from './config'\r\nimport Request from '../common/util/request'\r\n\r\nconst request = new Request()\r\n\r\nexport function getTopList () {\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_myqq_toplist.fcg'\r\n\r\n  const data = Object.assign({}, jsonpCommonParams, {\r\n    uin: 0,\r\n    needNewCode: 1,\r\n    platform: 'h5'\r\n  })\r\n\r\n  return request.jsonp(url, data, jsonpOptions)\r\n}\r\n\r\nexport function getMusicList (topid) {\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg'\r\n\r\n  const data = Object.assign({}, jsonpCommonParams, {\r\n    topid,\r\n    needNewCode: 1,\r\n    uin: 0,\r\n    tpl: 3,\r\n    page: 'detail',\r\n    type: 'top',\r\n    platform: 'h5'\r\n  })\r\n\r\n  return request.jsonp(url, data, jsonpOptions)\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-list\"},[_c('div',{ref:\"title\",staticClass:\"title-wrapper\"},[_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"icon-back\"})]),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))])]),_c('div',{ref:\"bg\",staticClass:\"background\",style:(_vm.bgStyle)},[_c('div',{ref:\"mask\",staticClass:\"mask\"}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.songs.length),expression:\"songs.length\"}],staticClass:\"play-wrapper\"},[_c('div',{staticClass:\"play-btn\",on:{\"click\":_vm.playAll}},[_c('i',{staticClass:\"icon-play\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"随机播放全部\")])])])]),_c('div',{ref:\"bgLayer\",staticClass:\"bg-layer\"}),_c('scroll',{ref:\"scroll\",staticClass:\"song-scroll\",attrs:{\"probeType\":3,\"listenScroll\":true,\"tag\":_vm.songs},on:{\"scroll\":_vm.scroll}},[_c('song-list',{attrs:{\"songs\":_vm.songs,\"rank\":_vm.rank},on:{\"selectSong\":_vm.selectSong}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"music-list\">\r\n    <div class=\"title-wrapper\" ref=\"title\">\r\n      <div class=\"back\" @click=\"back\"><i class=\"icon-back\"></i></div>\r\n      <div class=\"title\">{{ title }}</div>\r\n    </div>\r\n    <div class=\"background\" :style=\"bgStyle\" ref=\"bg\">\r\n      <div class=\"mask\" ref=\"mask\"></div>\r\n      <div class=\"play-wrapper\" v-show=\"songs.length\">\r\n        <div class=\"play-btn\" @click=\"playAll\">\r\n          <i class=\"icon-play\"></i>\r\n          <span class=\"text\">随机播放全部</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"bg-layer\" ref=\"bgLayer\"></div>\r\n    <scroll @scroll=\"scroll\"\r\n            :probeType=\"3\"\r\n            :listenScroll=\"true\"\r\n            class=\"song-scroll\"\r\n            ref=\"scroll\"\r\n            :tag=\"songs\">\r\n      <song-list @selectSong=\"selectSong\" :songs=\"songs\" :rank=\"rank\" />\r\n    </scroll>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SongList from '../../base/song-list/SongList'\r\nimport Scroll from '../../base/scroll/Scroll'\r\nimport Util from '../../common/util'\r\nimport { playListMixin } from '../../common/util/mixin'\r\n\r\nimport { mapActions } from 'vuex'\r\n\r\nconst util = new Util()\r\n\r\nconst transform = util.prefixStyle('transform')\r\nconst filter = util.prefixStyle('filter')\r\n\r\nexport default {\r\n  mixins: [playListMixin],\r\n  props: {\r\n    bgImg: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    songs: {\r\n      type: Array,\r\n      default: () => {\r\n        return []\r\n      }\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    rank: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      scrollY: 0\r\n    }\r\n  },\r\n  components: {\r\n    SongList,\r\n    Scroll\r\n  },\r\n  computed: {\r\n    bgStyle() {\r\n      return `background-image: url(${this.bgImg})`\r\n    }\r\n  },\r\n  mounted() {\r\n    this._setStyle()\r\n    this.minTranslate = -this.imageHeight + this.$refs.title.clientHeight\r\n  },\r\n  methods: {\r\n    whenPlayList(playList) {\r\n      const bottom = playList.length ? '60px' : ''\r\n      this.$refs.scroll.$el.style.bottom = bottom\r\n      this.$refs.scroll.refresh()\r\n    },\r\n    selectSong(song, index) {\r\n      this.selectPlay({ list: this.songs, index })\r\n    },\r\n    scroll(coor) {\r\n      this.scrollY = coor.y\r\n    },\r\n    back() {\r\n      this.$router.go(-1)\r\n    },\r\n    playAll() {\r\n      this.selectPlayAll({ list: this.songs })\r\n    },\r\n    _setStyle() {\r\n      this.imageHeight = this.$refs.bg.clientHeight\r\n      this.$refs.scroll.$el.style.top = `${this.imageHeight}px`\r\n      this.$refs.bgLayer.style.top = `${this.imageHeight}px`\r\n    },\r\n    ...mapActions(['selectPlay', 'selectPlayAll'])\r\n  },\r\n  watch: {\r\n    // 拖动列表时，各个元素的样式变化\r\n    scrollY(currentY) {\r\n      let scale = 1\r\n      let blur = 0\r\n      const opacity = currentY / this.minTranslate\r\n      const percent = Math.abs(currentY / this.imageHeight)\r\n\r\n      // currentY > 0 : 向下拖动时\r\n      if (currentY > 0) {\r\n        scale += percent\r\n        this.$refs.bg.style[transform] = `scale(${scale})`\r\n      } else {\r\n        blur = Math.min(25 * percent, 25)\r\n        this.$refs.bg.style[filter] = `blur(${blur}px)`\r\n      }\r\n\r\n      // 0 < opacity <= 1 : 向上拉动，scroll(被拖动的盒子)滚动到顶部之前\r\n      if (opacity >= 0.4 && opacity <= 1) {\r\n        const maskC = Math.ceil(Math.pow(opacity, 2) * 250)\r\n        const titleC = Math.floor(Math.pow((1 - opacity + 0.4), 2) * 250)\r\n        this.$refs.mask.style.background = `rgba(${maskC}, ${maskC}, ${maskC}, ${opacity})`\r\n        this.$refs.title.style.color = `rgb(${titleC}, ${titleC}, ${titleC})`\r\n      }\r\n      // currentY < this.minTranslate : 向上拖动，scroll已经超出了顶部\r\n      if (currentY < this.minTranslate) {\r\n        this.$refs.title.style.background = `rgba(250, 250, 250, ${opacity})`\r\n        this.$refs.title.style.color = 'rgb(0, 0, 0)'\r\n      } else {\r\n        this.$refs.title.style.background = null\r\n      }\r\n      if (currentY >= 0) {\r\n        this.$refs.mask.style.background = 'rgba(41, 41, 41, .3)'\r\n        this.$refs.bg.style[filter] = 'blur(0)'\r\n        this.$refs.title.style.color = 'rgb(250, 250, 250)'\r\n      }\r\n      const translate = Math.max(currentY, this.minTranslate)\r\n      this.$refs.bgLayer.style[transform] = `translateY(${translate}px)`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import \"../../common/stylus/variable\"\r\n@import \"../../common/stylus/mixin\"\r\n\r\n.music-list {\r\n  background rgba(250,250,250,1)\r\n  .title-wrapper {\r\n    position absolute\r\n    height 40px\r\n    width 100%\r\n    display flex\r\n    font-size $font-size-large\r\n    z-index 30\r\n    color #fff\r\n    .back {\r\n      flex 0 0 45px\r\n      flex-center()\r\n      font-size 22px\r\n    }\r\n    .title {\r\n      flex 1\r\n      display -webkit-box\r\n      -webkit-box-orient vertical\r\n      -webkit-line-clamp 1\r\n      overflow hidden\r\n      line-height 40px\r\n      text-align center\r\n      font-weight bold\r\n    }\r\n    &:after {\r\n      content ''\r\n      flex 0 0 45px\r\n    }\r\n  }\r\n  .background {\r\n    position relative\r\n    background-size cover\r\n    padding-top 70%\r\n    transform-origin: top\r\n    height 0\r\n    .mask {\r\n      position absolute\r\n      width 100%\r\n      top 0\r\n      bottom 0\r\n      background rgba(41, 41, 41, 0.3)\r\n    }\r\n    .play-wrapper {\r\n      position absolute\r\n      bottom 20px\r\n      flex-center()\r\n      color #22d59c\r\n      width 100%\r\n      .play-btn {\r\n        width 135px\r\n        height 32px\r\n        border 2px solid #22d59c\r\n        border-radius 32px\r\n        flex-center()\r\n        .icon-play {\r\n          font-size $font-size-medium-x\r\n        }\r\n        .text {\r\n          margin-left 5px\r\n          font-size $font-size-small\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .bg-layer {\r\n    position absolute\r\n    background rgba(250,250,250, 1)\r\n    width 100%\r\n    height 100%\r\n  }\r\n  .song-scroll {\r\n    position absolute\r\n    width 100%\r\n    bottom 0\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MusicList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MusicList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MusicList.vue?vue&type=template&id=3da0f1a2&scoped=true&\"\nimport script from \"./MusicList.vue?vue&type=script&lang=js&\"\nexport * from \"./MusicList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MusicList.vue?vue&type=style&index=0&id=3da0f1a2&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3da0f1a2\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RankDetail.vue?vue&type=style&index=0&id=5af0be3d&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RankDetail.vue?vue&type=style&index=0&id=5af0be3d&lang=stylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rank-detail\"},[_c('music-list',{attrs:{\"title\":_vm.rank.topTitle,\"bgImg\":_vm.rank.picUrl,\"songs\":_vm.songs,\"rank\":true}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"rank-detail\">\r\n    <music-list :title=\"rank.topTitle\" :bgImg=\"rank.picUrl\" :songs=\"songs\" :rank=\"true\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { getMusicList } from '../../api/rank'\r\nimport { isValidMusic, createSong, processUrl } from '../../common/util/song'\r\n\r\nimport MusicList from '../../components/music-list/MusicList'\r\nimport { ERR_OK } from '../../api/config'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      songs: []\r\n    }\r\n  },\r\n  components: {\r\n    MusicList\r\n  },\r\n  computed: {\r\n    ...mapState(['rank'])\r\n  },\r\n  created() {\r\n    this._getMusicList()\r\n  },\r\n  methods: {\r\n    _getMusicList() {\r\n      if (!this.rank.id) {\r\n        this.$router.push('/rank')\r\n        return\r\n      }\r\n      getMusicList(this.rank.id)\r\n        .then(res => {\r\n          if (res.code === ERR_OK) {\r\n            processUrl(this._normalizeSongs(res.songlist))\r\n              .then(res => {\r\n                this.songs = res\r\n              })\r\n          }\r\n        })\r\n    },\r\n    _normalizeSongs(list) {\r\n      const ret = []\r\n      list.forEach(item => {\r\n        const musicData = item.data\r\n        if (isValidMusic(musicData)) {\r\n          ret.push(createSong(musicData))\r\n        }\r\n      })\r\n      return ret\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.rank-detail {\r\n  position fixed\r\n  top 0\r\n  bottom 0\r\n  width 100%\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RankDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RankDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RankDetail.vue?vue&type=template&id=5af0be3d&scoped=true&\"\nimport script from \"./RankDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./RankDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RankDetail.vue?vue&type=style&index=0&id=5af0be3d&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5af0be3d\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}